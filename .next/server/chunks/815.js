exports.id=815,exports.ids=[815],exports.modules={1832:(e,t,s)=>{Promise.resolve().then(s.bind(s,2190))},6035:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},2190:(e,t,s)=>{"use strict";s.d(t,{Header:()=>g});var r=s(326),a=s(9734),l=s(9635),n=s(1810),i=s(4019),o=s(748),d=s(7577),c=s(434),u=s(5047),m=s(2777);function x({onClose:e,onSuccess:t}){let[s,a]=(0,d.useState)(!1),[l,n]=(0,d.useState)(!1),[o,c]=(0,d.useState)(""),[u,x]=(0,d.useState)(!1),[g,h]=(0,d.useState)(!1),[p,b]=(0,d.useState)({email:"",password:"",full_name:"",phone:"",user_type:"agent",location_country:"",location_city:""}),y=async e=>{e.preventDefault(),n(!0),c("");try{if(s){if(!p.location_country||!p.location_city){c("Please provide your location (Country and City)"),n(!1);return}let{data:e,error:t}=await m.supabase.auth.signUp({email:p.email,password:p.password});if(t)throw t;if(e.user){let t=`${p.location_city}, ${p.location_country}`,s="malawi"!==p.location_country.toLowerCase(),{error:r}=await m.supabase.from("profiles").insert({id:e.user.id,email:p.email,full_name:p.full_name,phone:p.phone,current_location:t,is_diaspora:s,user_type:p.user_type});if(r)throw r;if("agent"===p.user_type){let{error:t}=await m.supabase.from("agents").insert({user_id:e.user.id,verification_status:"pending"});if(t&&!t.message.includes("duplicate"))throw t}}}else{let{error:e}=await m.supabase.auth.signInWithPassword({email:p.email,password:p.password});if(e)throw e}t()}catch(e){c(e.message||"Authentication failed")}finally{n(!1)}},f=async e=>{e.preventDefault(),n(!0),c("");try{if(!p.email){c("Please enter your email address"),n(!1);return}let{error:e}=await m.supabase.auth.resetPasswordForEmail(p.email,{redirectTo:`${window.location.origin}/reset-password`});if(e)throw e;h(!0)}catch(e){c(e.message||"Failed to send password reset email")}finally{n(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s?"List Your Property":"Sign In"}),s&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sign up to list properties as an Agent or Property Owner"})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(i.Z,{size:24})})]}),(0,r.jsxs)("form",{onSubmit:y,className:"p-6",children:[o&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:o}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",required:!0,value:p.email,onChange:e=>b({...p,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password *"}),!s&&r.jsx("button",{type:"button",onClick:()=>x(!0),className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"})]}),r.jsx("input",{type:"password",required:!u,value:p.password,onChange:e=>b({...p,password:e.target.value}),disabled:u,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),r.jsx("input",{type:"text",required:!0,value:p.full_name,onChange:e=>b({...p,full_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:p.phone,onChange:e=>b({...p,phone:e.target.value}),placeholder:"e.g., +265 991 123 456",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"I am registering as *"}),(0,r.jsxs)("select",{required:!0,value:p.user_type,onChange:e=>b({...p,user_type:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"agent",children:"Real Estate Agent"}),r.jsx("option",{value:"owner",children:"Property Owner"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Where are you located? * ",r.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"(Required for data mining)"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Country *"}),r.jsx("input",{type:"text",required:!0,value:p.location_country,onChange:e=>b({...p,location_country:e.target.value}),placeholder:"e.g., Malawi, South Africa",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"City *"}),r.jsx("input",{type:"text",required:!0,value:p.location_city,onChange:e=>b({...p,location_city:e.target.value}),placeholder:"e.g., Lilongwe, Johannesburg",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This helps us understand where sellers are located for market intelligence."})]})]})]}),u?r.jsx(r.Fragment,{children:g?(0,r.jsxs)("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"âœ… Password reset email sent!"}),(0,r.jsxs)("p",{className:"text-sm text-green-700",children:["Check your email (",p.email,") for a password reset link. Click the link to reset your password."]}),r.jsx("button",{type:"button",onClick:()=>{x(!1),h(!1)},className:"mt-4 text-sm text-blue-600 hover:underline",children:"Back to Sign In"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:f,disabled:l||!p.email,className:"w-full mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Sending...":"Send Reset Link"}),r.jsx("button",{type:"button",onClick:()=>x(!1),className:"w-full mt-3 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium text-gray-700",children:"Cancel"})]})}):r.jsx("button",{type:"submit",disabled:l,className:"w-full mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Loading...":s?"Create Account":"Sign In"}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx("button",{type:"button",onClick:()=>a(!s),className:"text-blue-600 hover:underline text-sm",children:s?"Already have an account? Sign in":"Don't have an account? Sign up"})}),s&&r.jsx("p",{className:"mt-4 text-xs text-center text-gray-500",children:"Note: Buyers don't need to sign up. You can browse properties and fill a simple form to see details."})]})]})})}function g(){let[e,t]=(0,d.useState)(null),[s,g]=(0,d.useState)(null),[h,p]=(0,d.useState)(!1),[b,y]=(0,d.useState)(!1),f=(0,u.usePathname)(),j=(0,u.useRouter)(),w=async()=>{let{data:{user:e}}=await m.supabase.auth.getUser();if(e){let{data:s}=await m.supabase.from("profiles").select("*").eq("id",e.id).maybeSingle();t(s),g(s)}else t(null),g(null)},v=async()=>{await m.supabase.auth.signOut(),t(null),j.push("/")};return(0,r.jsxs)(r.Fragment,{children:[r.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)(c.default,{href:"/",className:"flex items-center gap-2 text-lg sm:text-xl font-bold text-gray-900 hover:text-blue-600 transition-colors",onClick:()=>y(!1),children:[r.jsx(a.Z,{size:24,className:"sm:w-7 sm:h-7"}),r.jsx("span",{className:"hidden sm:inline",children:"Malawi Properties"}),r.jsx("span",{className:"sm:hidden",children:"Malawi"})]}),(0,r.jsxs)("nav",{className:"hidden lg:flex items-center gap-4",children:[r.jsx(c.default,{href:"/",className:`px-4 py-2 rounded-lg transition-colors text-sm ${"/"===f?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Marketplace"}),s&&"admin"===s.user_type&&r.jsx(c.default,{href:"/admin",className:`px-4 py-2 rounded-lg transition-colors text-sm ${"/admin"===f?"bg-red-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Admin"}),s&&"buyer"===s.user_type&&r.jsx(c.default,{href:"/buyer",className:`px-4 py-2 rounded-lg transition-colors text-sm ${"/buyer"===f?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"My Dashboard"}),s&&("agent"===s.user_type||"owner"===s.user_type)&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.default,{href:"/dashboard",className:`px-4 py-2 rounded-lg transition-colors text-sm ${"/dashboard"===f?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Dashboard"}),r.jsx(c.default,{href:"/analytics",className:`px-4 py-2 rounded-lg transition-colors text-sm ${"/analytics"===f?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Analytics"}),r.jsx(c.default,{href:"/intelligence",className:`px-4 py-2 rounded-lg transition-colors text-sm ${"/intelligence"===f?"bg-purple-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Intelligence"})]}),e?(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg",children:[r.jsx(l.Z,{size:18}),r.jsx("span",{className:"text-sm font-medium hidden xl:inline",children:e.full_name||e.email}),r.jsx("span",{className:"text-sm font-medium xl:hidden",children:e.full_name?.split(" ")[0]||e.email?.split("@")[0]})]}),r.jsx("button",{onClick:v,className:"p-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",title:"Sign out",children:r.jsx(n.Z,{size:20})})]}):r.jsx("button",{onClick:()=>p(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium min-h-[44px]",children:"Sign In"})]}),(0,r.jsxs)("div",{className:"lg:hidden flex items-center gap-2",children:[e&&(0,r.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 bg-gray-100 rounded-lg",children:[r.jsx(l.Z,{size:18}),r.jsx("span",{className:"text-xs font-medium max-w-[80px] truncate",children:e.full_name?.split(" ")[0]||e.email?.split("@")[0]})]}),r.jsx("button",{onClick:()=>y(!b),className:"p-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Toggle menu",children:b?r.jsx(i.Z,{size:24}):r.jsx(o.Z,{size:24})})]})]}),b&&(0,r.jsxs)("nav",{className:"lg:hidden border-t border-gray-200 py-4 space-y-2",children:[r.jsx(c.default,{href:"/",onClick:()=>y(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${"/"===f?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Marketplace"}),s&&"admin"===s.user_type&&r.jsx(c.default,{href:"/admin",onClick:()=>y(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${"/admin"===f?"bg-red-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Admin"}),s&&"buyer"===s.user_type&&r.jsx(c.default,{href:"/buyer",onClick:()=>y(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${"/buyer"===f?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"My Dashboard"}),s&&("agent"===s.user_type||"owner"===s.user_type)&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.default,{href:"/dashboard",onClick:()=>y(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${"/dashboard"===f?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Dashboard"}),r.jsx(c.default,{href:"/analytics",onClick:()=>y(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${"/analytics"===f?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Analytics"}),r.jsx(c.default,{href:"/intelligence",onClick:()=>y(!1),className:`block px-4 py-3 rounded-lg transition-colors text-base font-medium ${"/intelligence"===f?"bg-purple-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"Intelligence"})]}),!e&&r.jsx("button",{onClick:()=>{y(!1),p(!0)},className:"w-full text-left px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-base min-h-[44px]",children:"Sign In"}),e&&(0,r.jsxs)("button",{onClick:()=>{y(!1),v()},className:"w-full text-left px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors font-medium text-base min-h-[44px] flex items-center gap-2",children:[r.jsx(n.Z,{size:20}),"Sign Out"]})]})]})}),h&&r.jsx(x,{onClose:()=>p(!1),onSuccess:()=>{p(!1),w()}})]})}},2777:(e,t,s)=>{"use strict";s.d(t,{supabase:()=>n});var r=s(7939);let a="https://ofuyghemecqstflnhixy.supabase.co",l=a?a.replace(/\/$/,"").replace(/^(https?:\/\/)?/,"https://"):"https://placeholder.supabase.co",n=(0,r.eI)(l,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9mdXlnaGVtZWNxc3RmbG5oaXh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMDQ0NzUsImV4cCI6MjA3ODg4MDQ3NX0.kD12l4KnDFZuRNFCSOEIQWKCGdvy8CBCnuL2ukC0TAc",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},4294:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>d});var r=s(9510);s(7272);var a=s(8570);let l=(0,a.createProxy)(String.raw`/home/paas/Hope properties/src/components/Header.tsx`),{__esModule:n,$$typeof:i}=l;l.default;let o=(0,a.createProxy)(String.raw`/home/paas/Hope properties/src/components/Header.tsx#Header`),d={title:"Malawi Properties",description:"Malawi Property Marketplace for the diaspora",viewport:"width=device-width, initial-scale=1, maximum-scale=5",icons:{icon:"/favicon.ico",apple:"/favicon.ico"}};function c({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[r.jsx("head",{children:r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=5"})}),(0,r.jsxs)("body",{className:"min-h-screen bg-gray-50",children:[r.jsx(o,{}),e]})]})}},7272:()=>{}};