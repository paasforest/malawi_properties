(()=>{var e={};e.id=71,e.ids=[71],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},3955:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(1432),r(4294),r(5866);var a=r(3191),t=r(8716),i=r(7922),l=r.n(i),n=r(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(s,o);let d=["",{children:["setup",{children:["test-users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1432)),"/home/paas/Hope properties/app/setup/test-users/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4294)),"/home/paas/Hope properties/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/paas/Hope properties/app/setup/test-users/page.tsx"],u="/setup/test-users/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/setup/test-users/page",pathname:"/setup/test-users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9397:(e,s,r)=>{Promise.resolve().then(r.bind(r,1469))},1469:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p});var a=r(326),t=r(7577),i=r(2777);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(6557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var n=r(9635),o=r(9734),d=r(4659),c=r(1470);let u=[{email:"test.buyer@example.com",password:"TestBuyer123!",name:"Test Buyer",user_type:"buyer",is_diaspora:!1,current_location:"Lilongwe, Malawi"},{email:"test.buyer.diaspora@example.com",password:"TestBuyer123!",name:"Diaspora Buyer",user_type:"buyer",is_diaspora:!0,current_location:"Johannesburg, South Africa"},{email:"test.seller@example.com",password:"TestSeller123!",name:"Test Seller",user_type:"owner",is_diaspora:!1,current_location:"Blantyre, Malawi"},{email:"test.agent@example.com",password:"TestAgent123!",name:"Test Agent",user_type:"agent",is_diaspora:!1,current_location:"Lilongwe, Malawi"}];function p(){let[e,s]=(0,t.useState)(!1),[r,p]=(0,t.useState)({}),[m,x]=(0,t.useState)([]),g=async e=>{try{let s;let{data:r,error:a}=await i.supabase.auth.signUp({email:e.email,password:e.password,options:{data:{full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null}}});if(a){if(a.message.includes("already registered")||a.message.includes("User already registered")){let{data:r,error:a}=await i.supabase.auth.signInWithPassword({email:e.email,password:e.password});if(a)throw Error(`User exists but can't sign in: ${a.message}`);s=r.user.id}else throw console.error("Auth signup error:",{message:a.message,status:a.status,error:a}),Error(`Signup failed: ${a.message||"Unknown error"}`)}else if(!(s=r.user?.id))throw console.error("No user ID returned from signup:",r),Error("Signup succeeded but no user ID returned");if(!s)throw Error("Failed to get user ID");console.log("User created successfully, ID:",s),await new Promise(e=>setTimeout(e,500));let{data:t}=await i.supabase.from("profiles").select("id").eq("id",s).maybeSingle();if(t){let r={email:e.email,full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null};try{r.buyer_origin_type=e.is_diaspora?"diaspora":"local",r.local_origin_city=!e.is_diaspora&&e.current_location?"Lilongwe":null}catch(e){}let{error:a}=await i.supabase.from("profiles").update(r).eq("id",s);if(a){if(a.message.includes("column")&&a.message.includes("does not exist")){let r={email:e.email,full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null},{error:a}=await i.supabase.from("profiles").update(r).eq("id",s);if(a)throw await i.supabase.auth.signOut(),Error(`Failed to update profile: ${a.message}`)}else throw await i.supabase.auth.signOut(),Error(`Failed to update profile: ${a.message}`)}}else{let r={id:s,email:e.email,full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null};try{r.buyer_origin_type=e.is_diaspora?"diaspora":"local",r.local_origin_city=!e.is_diaspora&&e.current_location?"Lilongwe":null}catch(e){}let{error:a}=await i.supabase.from("profiles").upsert(r,{onConflict:"id"});if(a){if(a.message.includes("column")&&a.message.includes("does not exist")){let r={id:s,email:e.email,full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null},{error:a}=await i.supabase.from("profiles").upsert(r,{onConflict:"id"});if(a)throw await i.supabase.auth.signOut(),Error(`Failed to create profile: ${a.message}`)}else throw await i.supabase.auth.signOut(),Error(`Failed to create profile: ${a.message}`)}}if("agent"===e.user_type){let{error:e}=await i.supabase.from("agents").upsert({user_id:s,company_name:"Test Real Estate Agency",license_number:"TEST-LICENSE-001",districts_covered:["Lilongwe","Blantyre"],verification_status:"verified"},{onConflict:"user_id"});if(e&&!e.message.includes("duplicate"))throw await i.supabase.auth.signOut(),e}return await i.supabase.auth.signOut(),{success:!0,message:"Created successfully"}}catch(s){await i.supabase.auth.signOut();let e="Failed to create user";return s?.message?e=s.message:s?.error?.message?e=s.error.message:"string"==typeof s?e=s:s?.toString&&(e=s.toString()),console.error("Error creating test user:",{error:s,message:e,stack:s?.stack,details:s}),{success:!1,message:e}}},h=async()=>{for(let e of(s(!0),p({}),x([]),u)){let s=await g(e);p(r=>({...r,[e.email]:s})),s.success&&x(s=>[...s,e.email]),await new Promise(e=>setTimeout(e,500))}s(!1)},b=async e=>{s(!0);let r=await g(e);p(s=>({...s,[e.email]:r})),r.success&&x(s=>[...s,e.email]),s(!1)};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Test Users"}),a.jsx("p",{className:"text-gray-600",children:"Create test buyer and seller accounts to test the dashboards"})]}),a.jsx("div",{className:"mb-6",children:a.jsx("button",{onClick:h,disabled:e,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:e?(0,a.jsxs)(a.Fragment,{children:[a.jsx(l,{className:"animate-spin",size:20}),"Creating Users..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.Z,{size:20}),"Create All Test Users"]})})}),a.jsx("div",{className:"space-y-4",children:u.map(s=>{let t=r[s.email],i=m.includes(s.email);return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:["buyer"===s.user_type?a.jsx(n.Z,{className:"text-blue-600",size:24}):a.jsx(o.Z,{className:"text-green-600",size:24}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),a.jsx("p",{className:"text-sm text-gray-600",children:s.email})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Type:"}),a.jsx("span",{className:"ml-2 font-medium text-gray-900 capitalize",children:s.user_type})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Password:"}),a.jsx("span",{className:"ml-2 font-mono text-gray-900",children:s.password})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Location:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:s.current_location})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Diaspora:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:s.is_diaspora?"Yes":"No"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t&&a.jsx("div",{className:"flex items-center gap-2",children:t.success?(0,a.jsxs)(a.Fragment,{children:[a.jsx(d.Z,{className:"text-green-600",size:24}),a.jsx("span",{className:"text-green-600 text-sm font-medium",children:"Created"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.Z,{className:"text-red-600",size:24}),a.jsx("span",{className:"text-red-600 text-sm font-medium",children:"Error"})]})}),a.jsx("button",{onClick:()=>b(s),disabled:e||i,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Created":"Create"})]})]}),t&&!t.success&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-700",children:t.message})}),t&&t.success&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx("p",{className:"text-sm text-green-700 font-medium mb-2",children:"✅ User created!"}),(0,a.jsxs)("div",{className:"text-xs text-green-600 space-y-1",children:[(0,a.jsxs)("p",{children:["\uD83D\uDCE7 Email: ",s.email]}),(0,a.jsxs)("p",{children:["\uD83D\uDD11 Password: ",s.password]}),(0,a.jsxs)("p",{children:["\uD83D\uDCCD Dashboard:"," ","buyer"===s.user_type?a.jsx("a",{href:"/buyer",className:"underline",children:"/buyer"}):a.jsx("a",{href:"/dashboard",className:"underline",children:"/dashboard"})]})]})]})]},s.email)})}),m.length>0&&(0,a.jsxs)("div",{className:"mt-8 p-6 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"✅ Test Users Created!"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[a.jsx("p",{className:"text-blue-800 mb-3",children:"You can now log in with any of these accounts:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.filter(e=>m.includes(e.email)).map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[a.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:["\uD83D\uDCE7 ",e.email]}),(0,a.jsxs)("p",{children:["\uD83D\uDD11 ",e.password]}),(0,a.jsxs)("p",{children:["\uD83C\uDFE0"," ",a.jsx("a",{href:"buyer"===e.user_type?"/buyer":"/dashboard",className:"text-blue-600 hover:underline",children:"Go to Dashboard →"})]})]})]},e.email))}),a.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:a.jsx("a",{href:"/",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Go to Login Page →"})})]})]})]})})})}},4659:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1470:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(6557).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1432:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>n});var a=r(8570);let t=(0,a.createProxy)(String.raw`/home/paas/Hope properties/app/setup/test-users/page.tsx`),{__esModule:i,$$typeof:l}=t;t.default;let n=(0,a.createProxy)(String.raw`/home/paas/Hope properties/app/setup/test-users/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[948,799,815],()=>r(3955));module.exports=a})();