(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71],{7190:function(e,s,a){Promise.resolve().then(a.bind(a,5630))},5630:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var r=a(7437),t=a(2265),i=a(4316);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(1066).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var n=a(2022),o=a(4232),c=a(5862),d=a(9738);let u=[{email:"test.buyer@example.com",password:"TestBuyer123!",name:"Test Buyer",user_type:"buyer",is_diaspora:!1,current_location:"Lilongwe, Malawi"},{email:"test.buyer.diaspora@example.com",password:"TestBuyer123!",name:"Diaspora Buyer",user_type:"buyer",is_diaspora:!0,current_location:"Johannesburg, South Africa"},{email:"test.seller@example.com",password:"TestSeller123!",name:"Test Seller",user_type:"owner",is_diaspora:!1,current_location:"Blantyre, Malawi"},{email:"test.agent@example.com",password:"TestAgent123!",name:"Test Agent",user_type:"agent",is_diaspora:!1,current_location:"Lilongwe, Malawi"}];function m(){let[e,s]=(0,t.useState)(!1),[a,m]=(0,t.useState)({}),[p,h]=(0,t.useState)([]),g=async e=>{var s,a;try{let a;let{data:r,error:t}=await i.supabase.auth.signUp({email:e.email,password:e.password,options:{data:{full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null}}});if(t){if(t.message.includes("already registered")||t.message.includes("User already registered")){let{data:s,error:r}=await i.supabase.auth.signInWithPassword({email:e.email,password:e.password});if(r)throw Error("User exists but can't sign in: ".concat(r.message));a=s.user.id}else throw console.error("Auth signup error:",{message:t.message,status:t.status,error:t}),Error("Signup failed: ".concat(t.message||"Unknown error"))}else if(!(a=null===(s=r.user)||void 0===s?void 0:s.id))throw console.error("No user ID returned from signup:",r),Error("Signup succeeded but no user ID returned");if(!a)throw Error("Failed to get user ID");console.log("User created successfully, ID:",a),await new Promise(e=>setTimeout(e,500));let{data:l}=await i.supabase.from("profiles").select("id").eq("id",a).maybeSingle();if(l){let s={email:e.email,full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null};try{s.buyer_origin_type=e.is_diaspora?"diaspora":"local",s.local_origin_city=!e.is_diaspora&&e.current_location?"Lilongwe":null}catch(e){}let{error:r}=await i.supabase.from("profiles").update(s).eq("id",a);if(r){if(r.message.includes("column")&&r.message.includes("does not exist")){let s={email:e.email,full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null},{error:r}=await i.supabase.from("profiles").update(s).eq("id",a);if(r)throw await i.supabase.auth.signOut(),Error("Failed to update profile: ".concat(r.message))}else throw await i.supabase.auth.signOut(),Error("Failed to update profile: ".concat(r.message))}}else{let s={id:a,email:e.email,full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null};try{s.buyer_origin_type=e.is_diaspora?"diaspora":"local",s.local_origin_city=!e.is_diaspora&&e.current_location?"Lilongwe":null}catch(e){}let{error:r}=await i.supabase.from("profiles").upsert(s,{onConflict:"id"});if(r){if(r.message.includes("column")&&r.message.includes("does not exist")){let s={id:a,email:e.email,full_name:e.name,user_type:e.user_type,is_diaspora:e.is_diaspora||!1,current_location:e.current_location||null},{error:r}=await i.supabase.from("profiles").upsert(s,{onConflict:"id"});if(r)throw await i.supabase.auth.signOut(),Error("Failed to create profile: ".concat(r.message))}else throw await i.supabase.auth.signOut(),Error("Failed to create profile: ".concat(r.message))}}if("agent"===e.user_type){let{error:e}=await i.supabase.from("agents").upsert({user_id:a,company_name:"Test Real Estate Agency",license_number:"TEST-LICENSE-001",districts_covered:["Lilongwe","Blantyre"],verification_status:"verified"},{onConflict:"user_id"});if(e&&!e.message.includes("duplicate"))throw await i.supabase.auth.signOut(),e}return await i.supabase.auth.signOut(),{success:!0,message:"Created successfully"}}catch(s){await i.supabase.auth.signOut();let e="Failed to create user";return(null==s?void 0:s.message)?e=s.message:(null==s?void 0:null===(a=s.error)||void 0===a?void 0:a.message)?e=s.error.message:"string"==typeof s?e=s:(null==s?void 0:s.toString)&&(e=s.toString()),console.error("Error creating test user:",{error:s,message:e,stack:null==s?void 0:s.stack,details:s}),{success:!1,message:e}}},x=async()=>{for(let e of(s(!0),m({}),h([]),u)){let s=await g(e);m(a=>({...a,[e.email]:s})),s.success&&h(s=>[...s,e.email]),await new Promise(e=>setTimeout(e,500))}s(!1)},y=async e=>{s(!0);let a=await g(e);m(s=>({...s,[e.email]:a})),a.success&&h(s=>[...s,e.email]),s(!1)};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Test Users"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Create test buyer and seller accounts to test the dashboards"})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("button",{onClick:x,disabled:e,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{className:"animate-spin",size:20}),"Creating Users..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Z,{size:20}),"Create All Test Users"]})})}),(0,r.jsx)("div",{className:"space-y-4",children:u.map(s=>{let t=a[s.email],i=p.includes(s.email);return(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:["buyer"===s.user_type?(0,r.jsx)(n.Z,{className:"text-blue-600",size:24}):(0,r.jsx)(o.Z,{className:"text-green-600",size:24}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:s.email})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Type:"}),(0,r.jsx)("span",{className:"ml-2 font-medium text-gray-900 capitalize",children:s.user_type})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Password:"}),(0,r.jsx)("span",{className:"ml-2 font-mono text-gray-900",children:s.password})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Location:"}),(0,r.jsx)("span",{className:"ml-2 text-gray-900",children:s.current_location})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Diaspora:"}),(0,r.jsx)("span",{className:"ml-2 text-gray-900",children:s.is_diaspora?"Yes":"No"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[t&&(0,r.jsx)("div",{className:"flex items-center gap-2",children:t.success?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"text-green-600",size:24}),(0,r.jsx)("span",{className:"text-green-600 text-sm font-medium",children:"Created"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{className:"text-red-600",size:24}),(0,r.jsx)("span",{className:"text-red-600 text-sm font-medium",children:"Error"})]})}),(0,r.jsx)("button",{onClick:()=>y(s),disabled:e||i,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Created":"Create"})]})]}),t&&!t.success&&(0,r.jsx)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:t.message})}),t&&t.success&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-green-700 font-medium mb-2",children:"✅ User created!"}),(0,r.jsxs)("div",{className:"text-xs text-green-600 space-y-1",children:[(0,r.jsxs)("p",{children:["\uD83D\uDCE7 Email: ",s.email]}),(0,r.jsxs)("p",{children:["\uD83D\uDD11 Password: ",s.password]}),(0,r.jsxs)("p",{children:["\uD83D\uDCCD Dashboard:"," ","buyer"===s.user_type?(0,r.jsx)("a",{href:"/buyer",className:"underline",children:"/buyer"}):(0,r.jsx)("a",{href:"/dashboard",className:"underline",children:"/dashboard"})]})]})]})]},s.email)})}),p.length>0&&(0,r.jsxs)("div",{className:"mt-8 p-6 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-bold text-blue-900 mb-4",children:"✅ Test Users Created!"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsx)("p",{className:"text-blue-800 mb-3",children:"You can now log in with any of these accounts:"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.filter(e=>p.includes(e.email)).map(e=>(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900 mb-1",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,r.jsxs)("p",{children:["\uD83D\uDCE7 ",e.email]}),(0,r.jsxs)("p",{children:["\uD83D\uDD11 ",e.password]}),(0,r.jsxs)("p",{children:["\uD83C\uDFE0"," ",(0,r.jsx)("a",{href:"buyer"===e.user_type?"/buyer":"/dashboard",className:"text-blue-600 hover:underline",children:"Go to Dashboard →"})]})]})]},e.email))}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-blue-200",children:(0,r.jsx)("a",{href:"/",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Go to Login Page →"})})]})]})]})})})}},4232:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},5862:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2022:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9738:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(1066).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},4316:function(e,s,a){"use strict";a.d(s,{supabase:function(){return n}});var r=a(6887);let t="https://ofuyghemecqstflnhixy.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9mdXlnaGVtZWNxc3RmbG5oaXh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMDQ0NzUsImV4cCI6MjA3ODg4MDQ3NX0.kD12l4KnDFZuRNFCSOEIQWKCGdvy8CBCnuL2ukC0TAc",l=t?t.replace(/\/$/,"").replace(/^(https?:\/\/)?/,"https://"):"https://placeholder.supabase.co";t&&i?i.length<50&&console.error("❌ Invalid Supabase anon key:",{keyLength:i.length,keyPreview:i.substring(0,30)+"...",message:"Anon key appears to be a placeholder or too short. Please check Vercel environment variables."}):(console.error("❌ Missing Supabase environment variables:",{url:t?"✓":"✗",key:i?"✓":"✗",urlValue:t||"MISSING",keyValue:i?"".concat(i.substring(0,20),"..."):"MISSING"}),console.error("Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in Vercel environment variables and redeploy."));let n=(0,r.eI)(l,i||"placeholder-key",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[432,971,23,744],function(){return e(e.s=7190)}),_N_E=e.O()}]);