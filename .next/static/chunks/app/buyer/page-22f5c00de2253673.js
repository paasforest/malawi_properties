(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{9796:function(e,s,t){Promise.resolve().then(t.bind(t,9324))},9324:function(e,s,t){"use strict";t.d(s,{BuyerDashboard:function(){return h}});var a=t(7437),r=t(2265),i=t(4316),l=t(7390),d=t(5733);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(1066).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var c=t(9321),o=t(1077),x=t(4241),m=t(2639);function h(){let[e,s]=(0,r.useState)(null),[t,h]=(0,r.useState)([]),[g,u]=(0,r.useState)([]),[p,b]=(0,r.useState)([]),[v,y]=(0,r.useState)(!0),[j,N]=(0,r.useState)("inquiries");(0,r.useEffect)(()=>{f()},[]);let f=async()=>{try{let{data:{user:e}}=await i.supabase.auth.getUser();if(!e)return;let{data:t}=await i.supabase.from("profiles").select("*").eq("id",e.id).maybeSingle();s(t);let{data:a}=await i.supabase.from("inquiries").select("*, properties(*)").eq("buyer_id",e.id).order("created_at",{ascending:!1});h(a||[]);let{data:r}=await i.supabase.from("property_views").select("*, properties(*)").eq("viewer_id",e.id).order("viewed_at",{ascending:!1}),l=(r||[]).map(e=>e.properties).filter((e,s,t)=>s===t.findIndex(s=>(null==s?void 0:s.id)===(null==e?void 0:e.id))).filter(e=>null!==e);u(l)}catch(e){console.error("Error loading dashboard:",e)}finally{y(!1)}},w=async e=>{alert("Remove from saved - to be implemented")};return v?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl text-gray-600",children:"Loading dashboard..."})}):e?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Track your property inquiries and saved listings"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"My Inquiries"}),(0,a.jsx)(l.Z,{className:"text-blue-600",size:20})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:t.length}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[t.filter(e=>"new"===e.status).length," new"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Properties Viewed"}),(0,a.jsx)(d.Z,{className:"text-purple-600",size:20})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:g.length}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:"Recently browsed"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Saved Properties"}),(0,a.jsx)(n,{className:"text-red-600",size:20})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:p.length}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:"Favorites"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-8",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex space-x-1 px-6",children:[(0,a.jsxs)("button",{onClick:()=>N("inquiries"),className:"px-4 py-3 font-medium text-sm transition-colors ".concat("inquiries"===j?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(l.Z,{size:18,className:"inline mr-2"}),"My Inquiries (",t.length,")"]}),(0,a.jsxs)("button",{onClick:()=>N("viewed"),className:"px-4 py-3 font-medium text-sm transition-colors ".concat("viewed"===j?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(d.Z,{size:18,className:"inline mr-2"}),"Viewed (",g.length,")"]}),(0,a.jsxs)("button",{onClick:()=>N("saved"),className:"px-4 py-3 font-medium text-sm transition-colors ".concat("saved"===j?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(n,{size:18,className:"inline mr-2"}),"Saved (",p.length,")"]})]})}),(0,a.jsxs)("div",{className:"p-6",children:["inquiries"===j&&(0,a.jsx)("div",{children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(l.Z,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"You haven't sent any inquiries yet."}),(0,a.jsx)("a",{href:"/",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium inline-block",children:"Browse Properties"})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>{var s,t,r,i,l;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:(null===(s=e.properties)||void 0===s?void 0:s.title)||"Property"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Z,{size:14,className:"text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-600",children:(null===(t=e.properties)||void 0===t?void 0:t.district)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{size:14,className:"text-gray-400"}),(0,a.jsxs)("span",{className:"text-gray-900 font-medium",children:[null===(r=e.properties)||void 0===r?void 0:r.currency," ",(null===(l=e.properties)||void 0===l?void 0:null===(i=l.price)||void 0===i?void 0:i.toLocaleString())||"N/A"]})]}),e.budget_range&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Budget:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.budget_range})]}),e.intended_use&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Intent:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.intended_use})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("new"===e.status?"bg-blue-100 text-blue-800":"contacted"===e.status?"bg-yellow-100 text-yellow-800":"closed"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsx)(x.Z,{size:12,className:"inline mr-1"}),new Date(e.created_at).toLocaleDateString()]})]})]}),e.message&&(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:e.message})}),e.properties&&(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,a.jsx)("a",{href:"/",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View Property â†’"})})]},e.id)})})}),"viewed"===j&&(0,a.jsx)("div",{children:0===g.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.Z,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,a.jsx)("p",{className:"text-gray-600",children:"You haven't viewed any properties yet."}),(0,a.jsx)("a",{href:"/",className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium inline-block",children:"Browse Properties"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.slice(0,12).map(e=>(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(m.J,{property:e,onClick:()=>window.location.href="/"})},e.id))})}),"saved"===j&&(0,a.jsx)("div",{children:0===p.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(n,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"No saved properties yet."}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Save properties you're interested in by clicking the heart icon."}),(0,a.jsx)("a",{href:"/",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium inline-block",children:"Browse Properties"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(e=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.J,{property:e,onClick:()=>window.location.href="/"}),(0,a.jsx)("button",{onClick:()=>w(e.id),className:"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:bg-red-50 transition-colors",title:"Remove from saved",children:(0,a.jsx)(n,{className:"text-red-600 fill-red-600",size:20})})]},e.id))})})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-xl text-gray-600 mb-4",children:"Please sign in to view your dashboard"})})})}}},function(e){e.O(0,[432,171,971,23,744],function(){return e(e.s=9796)}),_N_E=e.O()}]);