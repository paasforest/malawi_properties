(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8692:function(e,s,t){Promise.resolve().then(t.bind(t,42))},42:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var a=t(7437),i=t(2265),r=t(6463),l=t(4316),n=t(500),c=t(1066);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,c.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),o=(0,c.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var x=t(1240),m=t(4232),p=t(5733),u=t(1077),h=t(4436),g=t(4207),y=t(933),b=t(3225),j=t(7515),v=t(7390),f=t(5862),N=t(9321);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let w=(0,c.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var q=t(8711);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let _=(0,c.Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),S=(0,c.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),k=(0,c.Z)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var z=t(9738);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let M=(0,c.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),D=(0,c.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);function Z(){let[e,s]=(0,i.useState)(!0),[t,r]=(0,i.useState)("30d"),[c,Z]=(0,i.useState)({totalUsers:0,totalAgents:0,totalProperties:0,totalInquiries:0,totalViews:0,totalSales:0,estimatedMarketValue:0,diasporaPercentage:0,averageTimeToSale:0,inquiryRate:0,viewToInquiryRate:0,activeUsers7d:0,activeUsers30d:0,mostActivePropertyType:""}),[C,P]=(0,i.useState)({views:0,inquiries:0,estimatedDirectCalls:0}),[I,T]=(0,i.useState)([]),[L,A]=(0,i.useState)([]),[R,V]=(0,i.useState)([]),[B,E]=(0,i.useState)({apiResponseTime:0,databaseConnected:!0,errorRate:0}),[O,U]=(0,i.useState)([]),[F,H]=(0,i.useState)([]),[K,J]=(0,i.useState)({views:0,inquiries:0,visits:0,sales:0}),[W,X]=(0,i.useState)([]),[G,Q]=(0,i.useState)({diaspora:{count:0,avgBudget:0,topDistricts:[]},local:{count:0,avgBudget:0,topCities:[],topDistricts:[]}}),[Y,$]=(0,i.useState)([]),[ee,es]=(0,i.useState)([]),[et,ea]=(0,i.useState)([]),[ei,er]=(0,i.useState)([]),[el,en]=(0,i.useState)([]),[ec,ed]=(0,i.useState)([]),[eo,ex]=(0,i.useState)([]),[em,ep]=(0,i.useState)([]),[eu,eh]=(0,i.useState)([]),[eg,ey]=(0,i.useState)([]),[eb,ej]=(0,i.useState)([]),[ev,ef]=(0,i.useState)([]),[eN,ew]=(0,i.useState)([]),[eq,e_]=(0,i.useState)(!1),[eS,ek]=(0,i.useState)(!1);(0,i.useEffect)(()=>{ez()},[]),(0,i.useEffect)(()=>{eS&&eM()},[eS]);let ez=async()=>{try{let{data:{user:e}}=await l.supabase.auth.getUser();if(!e){window.location.href="/admin/login";return}let{data:s}=await l.supabase.from("profiles").select("user_type").eq("id",e.id).maybeSingle();if((null==s?void 0:s.user_type)!=="admin"){alert("Access denied. Admin privileges required."),window.location.href="/admin/login";return}ek(!0)}catch(e){console.error("Error checking admin access:",e),window.location.href="/admin/login"}},eM=async()=>{try{var e;s(!0);let[{data:t},{data:a},{data:i},{data:r},{data:n},{data:c},{data:d}]=await Promise.all([l.supabase.from("profiles").select("*"),l.supabase.from("agents").select("*"),l.supabase.from("properties").select("*"),l.supabase.from("inquiries").select("*, profiles(is_diaspora, current_location), properties(title, district)"),l.supabase.from("property_views").select("*"),l.supabase.from("property_views").select("viewer_location, properties(district)"),l.supabase.from("property_views").select("property_id, viewed_at")]),o=(null==t?void 0:t.length)||0,x=(null==a?void 0:a.length)||0,m=(null==i?void 0:i.length)||0,p=(null==r?void 0:r.length)||0,u=(null==c?void 0:c.length)||0,h=(null==i?void 0:i.filter(e=>"sold"===e.status))||[],g=h.length,y=((null==i?void 0:i.filter(e=>"available"===e.status||"pending"===e.status))||[]).reduce((e,s)=>e+Number(s.price||0),0),b=(null==r?void 0:r.filter(e=>{var s;return"diaspora"===e.buyer_origin_type||(null===(s=e.profiles)||void 0===s?void 0:s.is_diaspora)||e.buyer_country&&"malawi"!==e.buyer_country.toLowerCase()}))||[],j=(null==r?void 0:r.filter(e=>"local"===e.buyer_origin_type||e.buyer_country&&"malawi"===e.buyer_country.toLowerCase()))||[],v=p>0?b.length/p*100:0,f=j.reduce((e,s)=>{let t=s.local_origin_city||s.buyer_city||"Unknown";return e[t]=(e[t]||0)+1,e},{}),N=Object.entries(f).map(e=>{let[s,t]=e;return{city:s,count:t}}).sort((e,s)=>s.count-e.count).slice(0,5),w=b.filter(e=>e.budget_range).map(e=>{let s=e.budget_range.match(/(\d+)/);return s?parseInt(s[1]):0}).filter(e=>e>0),q=j.filter(e=>e.budget_range).map(e=>{let s=e.budget_range.match(/(\d+)/);return s?parseInt(s[1]):0}).filter(e=>e>0),_=w.length>0?w.reduce((e,s)=>e+s,0)/w.length:0,S=q.length>0?q.reduce((e,s)=>e+s,0)/q.length:0,k=b.reduce((e,s)=>{var t;let a=(null===(t=s.properties)||void 0===t?void 0:t.district)||"Unknown";return e[a]=(e[a]||0)+1,e},{}),z=j.reduce((e,s)=>{var t;let a=(null===(t=s.properties)||void 0===t?void 0:t.district)||"Unknown";return e[a]=(e[a]||0)+1,e},{});Q({diaspora:{count:b.length,avgBudget:Math.round(_),topDistricts:Object.entries(k).map(e=>{let[s,t]=e;return{district:s,count:t}}).sort((e,s)=>s.count-e.count).slice(0,5)},local:{count:j.length,avgBudget:Math.round(S),topCities:N,topDistricts:Object.entries(z).map(e=>{let[s,t]=e;return{district:s,count:t}}).sort((e,s)=>s.count-e.count).slice(0,5)}});let M=h.filter(e=>e.sold_at&&e.listed_at),D=M.length>0?M.reduce((e,s)=>{let t=new Date(s.listed_at),a=new Date(s.sold_at),i=Math.floor((a.getTime()-t.getTime())/864e5);return e+i},0)/M.length:0,C=m>0?p/m*100:0,I=u>0?p/u*100:0,L=new Date,R=new Date(L.getTime()-6048e5),B=new Date(L.getTime()-2592e6),O=(null==t?void 0:t.filter(e=>new Date(e.last_login||e.created_at)>=R).length)||0,F=(null==t?void 0:t.filter(e=>new Date(e.last_login||e.created_at)>=B).length)||0,K=(null==i?void 0:i.reduce((e,s)=>(e[s.property_type]=(e[s.property_type]||0)+1,e),{}))||{},W=(null===(e=Object.entries(K).sort((e,s)=>s[1]-e[1])[0])||void 0===e?void 0:e[0])||"N/A";Z({totalUsers:o,totalAgents:x,totalProperties:m,totalInquiries:p,totalViews:u,totalSales:g,estimatedMarketValue:y,diasporaPercentage:v,averageTimeToSale:Math.round(D),inquiryRate:Math.round(100*C)/100,viewToInquiryRate:Math.round(100*I)/100,activeUsers7d:O,activeUsers30d:F,mostActivePropertyType:W});let G=Math.round(.3*p);P({views:u,inquiries:p,estimatedDirectCalls:G});let Y=(i||[]).map(e=>({...e,performanceScore:(e.views_count||0)+2*(e.inquiries_count||0)})).sort((e,s)=>s.performanceScore-e.performanceScore).slice(0,10);T(Y);let ee=(i||[]).filter(e=>{if(0===(e.views_count||0))return!0;let s=null==d?void 0:d.filter(s=>s.property_id===e.id).sort((e,s)=>new Date(s.viewed_at||0).getTime()-new Date(e.viewed_at||0).getTime())[0];return!s||!s.viewed_at||new Date(s.viewed_at)<B}).slice(0,10);A(ee);let et=new Date(L.getTime()-864e5),ei=[...(i||[]).filter(e=>new Date(e.created_at)>=et).map(e=>({type:"property_listed",description:"New property: ".concat(e.title),timestamp:e.created_at,user:"Agent/Owner"})),...(r||[]).filter(e=>new Date(e.created_at)>=et).map(e=>{var s;return{type:"inquiry",description:"New inquiry for ".concat((null===(s=e.properties)||void 0===s?void 0:s.title)||"property"),timestamp:e.created_at,user:"Buyer"}}),...(t||[]).filter(e=>new Date(e.created_at)>=et).map(e=>({type:"user_signup",description:"New user: ".concat(e.full_name||e.email),timestamp:e.created_at,user:e.full_name||e.email}))].sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,20);V(ei);let el=performance.now();try{let{error:e}=await l.supabase.from("profiles").select("id").limit(1),s=performance.now();E({apiResponseTime:Math.round(s-el),databaseConnected:!e,errorRate:0})}catch(e){E({apiResponseTime:0,databaseConnected:!1,errorRate:100})}let{data:ec}=await l.supabase.from("admin_activity_log").select("*").order("created_at",{ascending:!1}).limit(20);U(ec||[]);let{data:eo}=await l.supabase.from("traffic_sources").select("*").order("created_at",{ascending:!1}).limit(100),em=(eo||[]).reduce((e,s)=>{let t=s.source||"direct";return e[t]=(e[t]||0)+1,e},{}),eu=Object.entries(em).map(e=>{let[s,t]=e;return{source:s,count:t,percentage:(t/((null==eo?void 0:eo.length)||1)*100).toFixed(1)}}).sort((e,s)=>s.count-e.count).slice(0,10);H(eu);let eg=Math.round(.2*p);J({views:u,inquiries:p,visits:eg,sales:g});let eb={},ev=new Date(L.getTime()-72576e5);(i||[]).filter(e=>new Date(e.created_at)>=ev).forEach(e=>{let s=new Date(e.created_at);s.setDate(s.getDate()-s.getDay());let t=s.toISOString().split("T")[0];eb[t]||(eb[t]={properties:0,inquiries:0,sales:0,views:0}),eb[t].properties++,eb[t].views+=e.views_count||0,eb[t].inquiries+=e.inquiries_count||0,"sold"===e.status&&eb[t].sales++});let eN=Object.entries(eb).map(e=>{let[s,t]=e;return{week:s,properties:t.properties,inquiries:t.inquiries,sales:t.sales,views:t.views}}).sort((e,s)=>e.week.localeCompare(s.week)).slice(-12);X(eN);let eq=(i||[]).sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,10);$(eq);let eS=(r||[]).sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,10);es(eS);let ek=(t||[]).sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,10);ea(ek);let ez=(a||[]).filter(e=>"pending"===e.verification_status);er(ez);let eM=(null==i?void 0:i.reduce((e,s)=>(e[s.district]||(e[s.district]={listings:0,sold:0,totalSaleValue:0,avgSalePrice:0,localBuyers:0,diasporaBuyers:0}),e[s.district].listings++,"sold"===s.status&&(e[s.district].sold++,s.sale_price&&(e[s.district].totalSaleValue+=Number(s.sale_price)),"local"===s.buyer_type&&e[s.district].localBuyers++,"diaspora"===s.buyer_type&&e[s.district].diasporaBuyers++),e),{}))||{},eD=Object.entries(eM).map(e=>{let[s,t]=e;return{district:s,count:t.listings,listings:t.listings,sold:t.sold,totalSaleValue:t.totalSaleValue,avgSalePrice:t.sold>0&&t.totalSaleValue>0?Math.round(t.totalSaleValue/t.sold):0,localBuyers:t.localBuyers,diasporaBuyers:t.diasporaBuyers,salesRate:t.listings>0?Math.round(t.sold/t.listings*100):0,views:(null==c?void 0:c.filter(e=>{var t;return(null===(t=e.properties)||void 0===t?void 0:t.district)===s}).length)||0,inquiries:(null==r?void 0:r.filter(e=>{var t;return(null===(t=e.properties)||void 0===t?void 0:t.district)===s}).length)||0}}).sort((e,s)=>s.count-e.count).slice(0,10);en(eD);let eZ=(null==i?void 0:i.reduce((e,s)=>(e[s.property_type]=(e[s.property_type]||0)+1,e),{}))||{},eC=Object.entries(eZ).map(e=>{let[s,t]=e;return{type:s,count:t}}).sort((e,s)=>s.count-e.count);ed(eC);let eP=(null==r?void 0:r.reduce((e,s)=>{var t,a;if((null===(t=s.profiles)||void 0===t?void 0:t.is_diaspora)&&(null===(a=s.profiles)||void 0===a?void 0:a.current_location)){let t=s.profiles.current_location;e[t]=(e[t]||0)+1}return e},{}))||{},eI=Object.entries(eP).map(e=>{let[s,t]=e;return{location:s,count:t}}).sort((e,s)=>s.count-e.count).slice(0,10);ex(eI);let eT=(null==i?void 0:i.filter(e=>"land"===e.property_type&&e.plot_size&&e.plot_size>0))||[];e_(eT.length>0);let eL=e=>e<400?"Small (<400sqm)":e>=400&&e<=500?"Standard (400-500sqm)":e>500&&e<=700?"Medium (500-700sqm)":e>700&&e<=1e3?"Large (700-1000sqm)":"Extra Large (>1000sqm)",eA={};eT.forEach(e=>{let s=eL(e.plot_size),t="".concat(e.district,"|").concat(s);eA[t]||(eA[t]={district:e.district,category:s,prices:[],plotSizes:[],views:[],inquiries:[]}),eA[t].prices.push(e.price),eA[t].plotSizes.push(e.plot_size),eA[t].views.push(e.views_count),eA[t].inquiries.push(e.inquiries_count)});let eR=Object.values(eA).map(e=>({district:e.district,category:e.category,avgPrice:Math.round(e.prices.reduce((e,s)=>e+s,0)/e.prices.length),plotCount:e.prices.length,avgSize:Math.round(e.plotSizes.reduce((e,s)=>e+s,0)/e.plotSizes.length),totalViews:e.views.reduce((e,s)=>e+s,0),totalInquiries:e.inquiries.reduce((e,s)=>e+s,0)})).sort((e,s)=>s.avgPrice-e.avgPrice);ep(eR);let eV={};eT.forEach(e=>{eV[e.district]||(eV[e.district]={});let s=Math.round(e.plot_size);eV[e.district][s]=(eV[e.district][s]||0)+1});let eB=Object.entries(eV).map(e=>{let[s,t]=e,a=Object.entries(t).map(e=>{let[s,t]=e;return{size:parseInt(s),count:t}}).sort((e,s)=>s.count-e.count),i=a[0],r=a.reduce((e,s)=>e+s.count,0),l=eT.filter(e=>e.district===s&&Math.round(e.plot_size)===i.size).reduce((e,s)=>e+s.price,0)/i.count;return{district:s,mostCommonSize:i.size,frequency:i.count,totalPlots:r,avgPrice:Math.round(l),percentage:Math.round(i.count/r*100)}}).sort((e,s)=>s.frequency-e.frequency);eh(eB);let eE={"Small (<400sqm)":0,"Standard (400-500sqm)":0,"Medium (500-700sqm)":0,"Large (700-1000sqm)":0,"Extra Large (>1000sqm)":0};eT.forEach(e=>{let s=eL(e.plot_size);eE[s]=(eE[s]||0)+1}),ey(Object.entries(eE).map(e=>{let[s,t]=e;return{category:s,count:t}}));let eO={};null==r||r.forEach(e=>{var s,t;if((null===(s=e.profiles)||void 0===s?void 0:s.is_diaspora)&&(null===(t=e.profiles)||void 0===t?void 0:t.current_location)){let s=e.profiles.current_location,t=null==i?void 0:i.find(s=>s.id===e.property_id);if(t&&"land"===t.property_type&&t.plot_size){let e=eL(t.plot_size),a="".concat(s,"|").concat(e);eO[a]||(eO[a]={location:s,category:e,count:0,avgPrice:0,prices:[]}),eO[a].count++,eO[a].prices.push(t.price)}}});let eU=Object.values(eO).map(e=>({location:e.location,category:e.category,inquiryCount:e.count,avgPrice:Math.round(e.prices.reduce((e,s)=>e+s,0)/e.prices.length)})).sort((e,s)=>s.inquiryCount-e.inquiryCount),eF={};eU.forEach(e=>{eF[e.location]||(eF[e.location]=[]),eF[e.location].push(e)});let eH=Object.entries(eF).map(e=>{let[s,t]=e,a=t.sort((e,s)=>s.inquiryCount-e.inquiryCount)[0],i=t.reduce((e,s)=>e+s.inquiryCount,0);return{location:s,preferredCategory:a.category,preferredSize:a.category.includes("Small")?"<400sqm":a.category.includes("Standard")?"400-500sqm":a.category.includes("Medium")?"500-700sqm":a.category.includes("Large")?"700-1000sqm":">1000sqm",inquiryCount:a.inquiryCount,totalInquiries:i,percentage:Math.round(a.inquiryCount/i*100)}}).sort((e,s)=>s.totalInquiries-e.totalInquiries);ej(eH);let eK={};eT.forEach(e=>{let s=new Date(e.created_at).toISOString().slice(0,7);eK[s]||(eK[s]={prices:[],count:0}),eK[s].prices.push(e.price),eK[s].count++});let eJ=Object.entries(eK).map(e=>{let[s,t]=e;return{month:s,avgPrice:Math.round(t.prices.reduce((e,s)=>e+s,0)/t.prices.length),plotCount:t.count}}).sort((e,s)=>e.month.localeCompare(s.month)).slice(-12);ef(eJ);let eW={};eT.forEach(e=>{let s=eL(e.plot_size);eW[s]||(eW[s]={category:s,listings:0,totalViews:0,totalInquiries:0,sold:0,prices:[]}),eW[s].listings++,eW[s].totalViews+=e.views_count||0,eW[s].totalInquiries+=e.inquiries_count||0,"sold"===e.status&&(eW[s].sold++,eW[s].prices.push(e.price))});let eX=Object.values(eW).map(e=>({category:e.category,listings:e.listings,avgViews:Math.round(e.totalViews/e.listings),avgInquiries:Math.round(e.totalInquiries/e.listings*100)/100,conversionRate:Math.round(e.sold/e.listings*100),avgSoldPrice:e.prices.length>0?Math.round(e.prices.reduce((e,s)=>e+s,0)/e.prices.length):0,inquiryRate:Math.round(e.totalInquiries/Math.max(e.totalViews,1)*1e4)/100})).sort((e,s)=>s.avgInquiries-e.avgInquiries);ew(eX)}catch(e){console.error("Error loading dashboard data:",e)}finally{s(!1)}},eD=async e=>{try{let s=[],t="";switch(e){case"properties":let{data:a}=await l.supabase.from("properties").select("*");s=a||[],t="properties_".concat(new Date().toISOString().split("T")[0],".json");break;case"inquiries":let{data:i}=await l.supabase.from("inquiries").select("*, profiles(*), properties(*)");s=i||[],t="inquiries_".concat(new Date().toISOString().split("T")[0],".json");break;case"users":let{data:r}=await l.supabase.from("profiles").select("*");s=r||[],t="users_".concat(new Date().toISOString().split("T")[0],".json");break;case"analytics":s={stats:c,districts:el,propertyTypes:ec,diaspora:eo,exportedAt:new Date().toISOString()},t="analytics_".concat(new Date().toISOString().split("T")[0],".json")}let n=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),d=URL.createObjectURL(n),o=document.createElement("a");o.href=d,o.download=t,o.click(),URL.revokeObjectURL(d)}catch(e){console.error("Error exporting data:",e),alert("Error exporting data")}};return!eS||e?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("div",{className:"text-xl text-gray-600",children:"Loading admin dashboard..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-4 sm:py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-3 sm:px-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 sm:mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 flex items-center gap-2 sm:gap-3",children:[(0,a.jsx)(n.Z,{className:"text-blue-600 w-7 h-7 sm:w-9 sm:h-9",size:28}),(0,a.jsx)("span",{children:"Admin Dashboard"})]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1 sm:mt-2 text-sm sm:text-base",children:"Comprehensive data monitoring and analytics"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[(0,a.jsxs)("button",{onClick:eM,className:"px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 text-sm sm:text-base min-h-[44px]",children:[(0,a.jsx)(d,{size:18}),(0,a.jsx)("span",{children:"Refresh"})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{className:"w-full sm:w-auto px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm sm:text-base min-h-[44px]",children:[(0,a.jsx)(o,{size:18}),(0,a.jsx)("span",{children:"Export Data"})]}),(0,a.jsxs)("div",{className:"absolute right-0 sm:right-0 mt-2 w-full sm:w-48 bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10",children:[(0,a.jsx)("button",{onClick:()=>eD("properties"),className:"block w-full text-left px-4 py-3 hover:bg-gray-50 rounded-t-lg text-sm min-h-[44px]",children:"Export Properties"}),(0,a.jsx)("button",{onClick:()=>eD("inquiries"),className:"block w-full text-left px-4 py-3 hover:bg-gray-50 text-sm min-h-[44px]",children:"Export Inquiries"}),(0,a.jsx)("button",{onClick:()=>eD("users"),className:"block w-full text-left px-4 py-3 hover:bg-gray-50 text-sm min-h-[44px]",children:"Export Users"}),(0,a.jsx)("button",{onClick:()=>eD("analytics"),className:"block w-full text-left px-4 py-3 hover:bg-gray-50 rounded-b-lg text-sm min-h-[44px]",children:"Export Analytics"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"Total Users"}),(0,a.jsx)(x.Z,{className:"text-blue-600",size:24})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:c.totalUsers}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[c.totalAgents," agents, ",c.totalUsers-c.totalAgents," buyers/owners"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"Properties"}),(0,a.jsx)(m.Z,{className:"text-green-600",size:24})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:c.totalProperties}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[c.totalSales," sold (",c.totalProperties>0?(c.totalSales/c.totalProperties*100).toFixed(1):"0","%)"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"Total Views"}),(0,a.jsx)(p.Z,{className:"text-purple-600",size:24})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:c.totalViews.toLocaleString()}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[c.totalInquiries," inquiries"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"Market Value"}),(0,a.jsx)(u.Z,{className:"text-orange-600",size:24})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["MWK ",(c.estimatedMarketValue/1e6).toFixed(1),"M"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[c.totalProperties," active listings"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-indigo-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"Diaspora"}),(0,a.jsx)(h.Z,{className:"text-indigo-600",size:24})]}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-gray-900",children:[c.diasporaPercentage.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"of inquiries"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-3 sm:p-4 mb-4 sm:mb-6 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 sm:flex-initial",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium text-sm sm:text-base",children:"Time Period:"}),(0,a.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"px-4 py-2.5 sm:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-base sm:text-sm min-h-[44px] flex-1 sm:flex-initial",children:[(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,a.jsx)("option",{value:"all",children:"All Time"})]})]}),(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-gray-500 text-center sm:text-left",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 mb-8 border border-purple-200",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"text-purple-600",size:24}),"Buyer Journey Tracking"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl font-bold text-purple-900",children:C.views.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Property Views"})]}),(0,a.jsxs)("div",{className:"text-center text-gray-400 text-2xl flex items-center justify-center",children:["↓ ",(C.inquiries/C.views*100).toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl font-bold text-blue-900",children:C.inquiries}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Inquiries Sent"})]}),(0,a.jsx)("div",{className:"text-center text-gray-400 text-2xl flex items-center justify-center",children:"↓ ~30%"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-4xl font-bold text-green-900",children:["~",C.estimatedDirectCalls]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Estimated Direct Calls"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(g.Z,{className:"text-blue-600",size:24}),(0,a.jsx)("span",{className:"text-gray-700 font-semibold",children:"Inquiry Rate"})]}),(0,a.jsxs)("div",{className:"text-4xl font-bold text-blue-900",children:[c.inquiryRate.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 mt-2",children:[c.totalInquiries," inquiries / ",c.totalProperties," listings"]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(y.Z,{className:"text-green-600",size:24}),(0,a.jsx)("span",{className:"text-gray-700 font-semibold",children:"Avg Time to Sale"})]}),(0,a.jsx)("div",{className:"text-4xl font-bold text-green-900",children:c.averageTimeToSale||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-green-700 mt-2",children:"days"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(b.Z,{className:"text-purple-600",size:24}),(0,a.jsx)("span",{className:"text-gray-700 font-semibold",children:"View/Inquiry Ratio"})]}),(0,a.jsx)("div",{className:"text-4xl font-bold text-purple-900",children:(c.totalViews/Math.max(c.totalInquiries,1)).toFixed(1)}),(0,a.jsx)("div",{className:"text-sm text-purple-700 mt-2",children:"views per inquiry"})]})]}),ei.length>0&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(j.Z,{className:"text-yellow-600",size:24}),(0,a.jsx)("h2",{className:"text-xl font-bold text-yellow-900",children:"Pending Verifications"}),(0,a.jsx)("span",{className:"bg-yellow-200 text-yellow-800 px-3 py-1 rounded-full text-sm font-semibold",children:ei.length})]}),(0,a.jsxs)("div",{className:"text-yellow-800",children:[ei.length," agent verification(s) pending review"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"Active Users (7d)"}),(0,a.jsx)(x.Z,{className:"text-blue-600",size:24})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:c.activeUsers7d}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[c.activeUsers30d," active in last 30 days"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"View → Inquiry Rate"}),(0,a.jsx)(b.Z,{className:"text-green-600",size:24})]}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-gray-900",children:[c.viewToInquiryRate.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[c.totalInquiries," inquiries / ",c.totalViews," views"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"Most Active Type"}),(0,a.jsx)(m.Z,{className:"text-purple-600",size:24})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 capitalize",children:c.mostActivePropertyType}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Most listed property type"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"text-green-600",size:24}),"Real-Time Activity (Last 24 Hours)"]}),(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Live"})]})]}),0===R.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(g.Z,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"No activity in the last 24 hours"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Activity will appear here as users interact with the platform"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:R.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-0",children:[(0,a.jsx)("div",{className:"p-2 rounded-full ".concat("property_listed"===e.type?"bg-blue-100 text-blue-600":"inquiry"===e.type?"bg-purple-100 text-purple-600":"bg-green-100 text-green-600"),children:"property_listed"===e.type?(0,a.jsx)(m.Z,{size:16}):"inquiry"===e.type?(0,a.jsx)(v.Z,{size:16}):(0,a.jsx)(x.Z,{size:16})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.description}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleString()})]})]},s))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"text-green-600",size:24}),"Top Performing Properties"]}),0===I.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.Z,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"No properties yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Top performers will appear here once properties get views and inquiries"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:I.map((e,s)=>(0,a.jsxs)("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-gray-400 font-bold",children:["#",s+1]}),(0,a.jsx)("span",{className:"font-semibold text-gray-900 text-sm line-clamp-1",children:e.title})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.district})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-600 mt-2",children:[(0,a.jsxs)("span",{children:["\uD83D\uDC41️ ",e.views_count||0," views"]}),(0,a.jsxs)("span",{children:["\uD83D\uDCAC ",e.inquiries_count||0," inquiries"]}),(0,a.jsxs)("span",{className:"text-green-600 font-semibold",children:["Score: ",e.performanceScore]})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"text-orange-600",size:24}),"Properties Needing Attention"]}),0===L.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(f.Z,{className:"mx-auto text-green-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"All properties are performing well!"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No properties need attention at this time"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:L.map(e=>(0,a.jsxs)("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900 text-sm line-clamp-1",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.district})]}),(0,a.jsx)("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs font-semibold",children:"Needs Help"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-2",children:0===e.views_count?"No views yet":"No views in last 30 days"})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"text-blue-600",size:24}),"Top Districts by Activity & Sales"]}),0===el.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(N.Z,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600",children:"No district data yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"District analytics will appear as properties are added"})]}):(0,a.jsx)("div",{className:"space-y-4",children:el.map((e,s)=>(0,a.jsxs)("div",{className:"border-b border-gray-100 pb-4 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"text-gray-400 font-bold text-lg",children:["#",s+1]}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.district})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("span",{className:"text-gray-600 font-bold",children:[e.listings," listings"]}),e.sold>0&&(0,a.jsxs)("span",{className:"block text-green-600 font-semibold text-sm",children:[e.sold," sold"]})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:"".concat(e.listings/Math.max(c.totalProperties,1)*100,"%")}})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-2 flex-wrap",children:[(0,a.jsxs)("span",{children:[e.views," views"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[e.inquiries," inquiries"]}),e.sold>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{className:"text-green-600 font-semibold",children:[e.sold," sales (",e.salesRate,"%)"]}),e.avgSalePrice>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{className:"text-green-700 font-semibold",children:["Avg: ",e.avgSalePrice.toLocaleString()," MWK"]})]}),(e.localBuyers>0||e.diasporaBuyers>0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{className:"text-blue-600",children:[e.localBuyers>0&&"".concat(e.localBuyers," local"),e.localBuyers>0&&e.diasporaBuyers>0&&" • ",e.diasporaBuyers>0&&"".concat(e.diasporaBuyers," diaspora")]})]})]})]})]},e.district))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(w,{className:"text-green-600",size:24}),"Property Type Distribution"]}),0===ec.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(w,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600",children:"No property type data yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Property type distribution will appear as listings are added"})]}):(0,a.jsx)("div",{className:"space-y-4",children:ec.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900 capitalize",children:e.type}),(0,a.jsx)("span",{className:"text-gray-600 font-bold",children:e.count})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-green-600 h-3 rounded-full transition-all",style:{width:"".concat(e.count/Math.max(c.totalProperties,1)*100,"%")}})})]},e.type))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"text-blue-600",size:24}),"Buyer Segment Intelligence"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"border border-indigo-200 rounded-lg p-6 bg-indigo-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-indigo-900",children:"Diaspora Buyers"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-indigo-700",children:G.diaspora.count})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Percentage:"}),(0,a.jsxs)("span",{className:"font-bold ml-2 text-indigo-900",children:[c.totalInquiries>0?(G.diaspora.count/c.totalInquiries*100).toFixed(1):0,"%"]})]}),G.diaspora.avgBudget>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Avg Budget:"}),(0,a.jsxs)("span",{className:"font-bold ml-2 text-indigo-900",children:["MK ",G.diaspora.avgBudget,"M"]})]}),G.diaspora.topDistricts.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"Top Districts:"}),(0,a.jsx)("div",{className:"mt-2 space-y-1",children:G.diaspora.topDistricts.map(e=>(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{children:e.district}),(0,a.jsxs)("span",{className:"font-semibold",children:[e.count," inquiries"]})]},e.district))})]})]})]}),(0,a.jsxs)("div",{className:"border border-green-200 rounded-lg p-6 bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-green-900",children:"Local Buyers"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-green-700",children:G.local.count})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Percentage:"}),(0,a.jsxs)("span",{className:"font-bold ml-2 text-green-900",children:[c.totalInquiries>0?(G.local.count/c.totalInquiries*100).toFixed(1):0,"%"]})]}),G.local.avgBudget>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Avg Budget:"}),(0,a.jsxs)("span",{className:"font-bold ml-2 text-green-900",children:["MK ",G.local.avgBudget,"M"]})]}),G.local.topCities.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"Top Cities:"}),(0,a.jsx)("div",{className:"mt-2 space-y-1",children:G.local.topCities.map(e=>(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{children:e.city}),(0,a.jsxs)("span",{className:"font-semibold",children:[e.count," buyers"]})]},e.city))})]}),G.local.topDistricts.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"Top Districts:"}),(0,a.jsx)("div",{className:"mt-2 space-y-1",children:G.local.topDistricts.map(e=>(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{children:e.district}),(0,a.jsxs)("span",{className:"font-semibold",children:[e.count," inquiries"]})]},e.district))})]})]})]})]})]}),eo.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"text-indigo-600",size:24}),"Diaspora Buyer Locations"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:eo.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:e.count}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.location})]},e.location))})]}),eq&&(0,a.jsxs)("div",{className:"space-y-8 mb-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"text-blue-600",size:28}),"Plot Intelligence \uD83C\uDDF2\uD83C\uDDFC"]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(w,{className:"text-blue-600",size:20}),"Plot Size Distribution"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:eg.map(e=>{let s=eg.reduce((e,s)=>e+s.count,0),t=s>0?Math.round(e.count/s*100):0;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e.count}),(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:e.category}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[t,"% of total"]})]},e.category)})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"text-green-600",size:20}),"Most Common Plot Sizes by District"]}),(0,a.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:eu.slice(0,10).map((e,s)=>(0,a.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"text-gray-400 font-bold",children:["#",s+1]}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.district})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[e.mostCommonSize," sqm"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.frequency," plots (",e.percentage,"%)"]})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Avg Price: ",e.avgPrice.toLocaleString()," MWK"]})]},e.district))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"text-orange-600",size:20}),"Average Price Per Plot (by District & Category)"]}),(0,a.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:em.slice(0,15).map((e,s)=>(0,a.jsxs)("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.district}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["• ",e.category]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[e.avgPrice.toLocaleString()," MWK"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Avg: ",e.avgSize," sqm"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.plotCount," plots"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[e.totalViews," views"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[e.totalInquiries," inquiries"]})]})]},"".concat(e.district,"-").concat(e.category)))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"text-purple-600",size:20}),"Plot Size vs Demand"]}),(0,a.jsx)("div",{className:"space-y-4",children:eN.map(e=>{let s=Math.max(...eN.map(e=>e.avgInquiries),1);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.category}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["• ",e.listings," listings"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-purple-900",children:e.avgInquiries.toFixed(2)}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"inquiries per listing"})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-purple-600 h-3 rounded-full transition-all",style:{width:"".concat(e.avgInquiries/s*100,"%")}})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-2",children:[(0,a.jsxs)("span",{children:["Conversion: ",e.conversionRate,"%"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["Avg views: ",e.avgViews]}),(0,a.jsx)("span",{children:"•"}),e.avgSoldPrice>0&&(0,a.jsxs)("span",{children:["Avg sold: ",e.avgSoldPrice.toLocaleString()," MWK"]})]})]},e.category)})})]}),eb.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"text-indigo-600",size:20}),"Diaspora Plot Preferences"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:eb.map(e=>(0,a.jsxs)("div",{className:"border border-indigo-200 rounded-lg p-4 bg-indigo-50",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900 mb-1",children:e.location}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-2",children:["Prefers: ",(0,a.jsx)("strong",{children:e.preferredCategory})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[e.inquiryCount," inquiries (",e.percentage,"% of ",e.totalInquiries," total)"]})]},e.location))})]}),ev.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"text-blue-600",size:20}),"Price Per Plot Trends (Last 12 Months)"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:ev.map(e=>{let s=Math.max(...ev.map(e=>e.avgPrice),1);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:new Date(e.month+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["• ",e.plotCount," plots"]})]}),(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[e.avgPrice.toLocaleString()," MWK"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(e.avgPrice/s*100,"%")}})})]},e.month)})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Properties"}),0===Y.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.Z,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"No properties yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Approve pending listings to see them here"}),(0,a.jsx)("a",{href:"/",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"View Marketplace →"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Y.map(e=>(0,a.jsxs)("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900 text-sm line-clamp-1",children:e.title}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.district," • ",e.property_type]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Inquiries"}),0===ee.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(v.Z,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"No inquiries yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Check marketing campaigns to drive more inquiries"}),(0,a.jsx)("a",{href:"/",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"View Marketplace →"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:ee.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900 text-sm line-clamp-1",children:(null===(s=e.properties)||void 0===s?void 0:s.title)||"N/A"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(null===(t=e.profiles)||void 0===t?void 0:t.current_location)||"Unknown"," • ",e.status]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:new Date(e.created_at).toLocaleDateString()})]},e.id)})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Users"}),0===et.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.Z,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"No users yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Users will appear here as they sign up"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:et.map(e=>(0,a.jsxs)("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900 text-sm",children:e.full_name||e.email}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.user_type," • ",e.is_diaspora?"Diaspora":"Local"]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(q.Z,{className:"text-purple-600",size:24}),"Inquiry Conversion Funnel"]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsxs)("div",{className:"w-full bg-blue-100 rounded-lg p-4 text-center border-2 border-blue-300",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:K.views.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Property Views"})]}),(0,a.jsxs)("div",{className:"text-gray-500 text-sm",children:["↓ ",K.views>0?(K.inquiries/K.views*100).toFixed(1):0,"%"]}),(0,a.jsxs)("div",{className:"w-[90%] bg-purple-100 rounded-lg p-4 text-center border-2 border-purple-300",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:K.inquiries.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"Inquiries Sent"})]}),(0,a.jsxs)("div",{className:"text-gray-500 text-sm",children:["↓ ",K.inquiries>0?(K.visits/K.inquiries*100).toFixed(1):0,"%"]}),(0,a.jsxs)("div",{className:"w-[70%] bg-green-100 rounded-lg p-4 text-center border-2 border-green-300",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-900",children:K.visits.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Property Visits (Estimated)"})]}),(0,a.jsxs)("div",{className:"text-gray-500 text-sm",children:["↓ ",K.visits>0?(K.sales/K.visits*100).toFixed(1):0,"%"]}),(0,a.jsxs)("div",{className:"w-[50%] bg-orange-100 rounded-lg p-4 text-center border-2 border-orange-300",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-900",children:K.sales.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-orange-700",children:"Sales"})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(_,{className:"text-green-600",size:24}),"System Health"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(S,{className:"text-blue-600",size:20}),(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"API Response Time"})]}),(0,a.jsxs)("span",{className:"font-bold ".concat(B.apiResponseTime<200?"text-green-600":B.apiResponseTime<500?"text-yellow-600":"text-red-600"),children:[B.apiResponseTime,"ms"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(k,{className:"text-green-600",size:20}),(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"Database"})]}),(0,a.jsxs)("span",{className:"flex items-center gap-2 font-bold ".concat(B.databaseConnected?"text-green-600":"text-red-600"),children:[B.databaseConnected?(0,a.jsx)(f.Z,{size:20}):(0,a.jsx)(z.Z,{size:20}),B.databaseConnected?"Connected":"Disconnected"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.Z,{className:"text-red-600",size:20}),(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"Error Rate"})]}),(0,a.jsxs)("span",{className:"font-bold ".concat(0===B.errorRate?"text-green-600":"text-red-600"),children:[B.errorRate,"%"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(M,{className:"text-blue-600",size:24}),"Traffic Sources"]}),0===F.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(M,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600",children:"No traffic data yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Traffic sources will appear as visitors come to the platform"})]}):(0,a.jsx)("div",{className:"space-y-3",children:F.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900 capitalize",children:e.source||"Direct"}),(0,a.jsx)("span",{className:"text-gray-600 font-bold",children:e.count})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(e.percentage,"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.percentage,"% of traffic"]})]},e.source))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"text-green-600",size:24}),"Performance Trends (12 Weeks)"]}),0===W.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(b.Z,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600",children:"No trend data yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Trends will appear as data accumulates over time"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:W.map(e=>(0,a.jsxs)("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:new Date(e.week).toLocaleDateString("en-US",{month:"short",day:"numeric"})})}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Properties:"}),(0,a.jsx)("span",{className:"font-bold ml-1",children:e.properties})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Views:"}),(0,a.jsx)("span",{className:"font-bold ml-1",children:e.views})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Inquiries:"}),(0,a.jsx)("span",{className:"font-bold ml-1",children:e.inquiries})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Sales:"}),(0,a.jsx)("span",{className:"font-bold ml-1 text-green-600",children:e.sales})]})]})]},e.week))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(D,{className:"text-purple-600",size:24}),"Admin Activity Log"]}),0===O.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(D,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,a.jsx)("p",{className:"text-gray-600",children:"No admin activity yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Admin actions will be logged here automatically"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:O.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:null===(s=e.action_type)||void 0===s?void 0:s.replace(/_/g," ")}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.description}),e.resource_type&&(0,a.jsxs)("span",{className:"inline-block mt-1 text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:[e.resource_type,": ",null===(t=e.resource_id)||void 0===t?void 0:t.substring(0,8),"..."]})]},e.id)})})]})]})]})})}function C(){let e=(0,r.useRouter)();return(0,i.useEffect)(()=>{(async()=>{let{data:{user:s}}=await l.supabase.auth.getUser();if(!s){e.push("/admin/login");return}let{data:t}=await l.supabase.from("profiles").select("user_type").eq("id",s.id).maybeSingle();if((null==t?void 0:t.user_type)!=="admin"){e.push("/admin/login");return}})()},[e]),(0,a.jsx)(Z,{})}},4207:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},7515:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8711:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},4232:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},5862:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},933:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1077:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5733:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4436:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},9321:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7390:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},500:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},3225:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},1240:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9738:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(1066).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6463:function(e,s,t){"use strict";var a=t(1169);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},4316:function(e,s,t){"use strict";t.d(s,{supabase:function(){return n}});var a=t(6887);let i="https://ofuyghemecqstflnhixy.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9mdXlnaGVtZWNxc3RmbG5oaXh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMDQ0NzUsImV4cCI6MjA3ODg4MDQ3NX0.kD12l4KnDFZuRNFCSOEIQWKCGdvy8CBCnuL2ukC0TAc",l=i?i.replace(/\/$/,"").replace(/^(https?:\/\/)?/,"https://"):"https://placeholder.supabase.co";i&&r?r.length<50&&console.error("❌ Invalid Supabase anon key:",{keyLength:r.length,keyPreview:r.substring(0,30)+"...",message:"Anon key appears to be a placeholder or too short. Please check Vercel environment variables."}):(console.error("❌ Missing Supabase environment variables:",{url:i?"✓":"✗",key:r?"✓":"✗",urlValue:i||"MISSING",keyValue:r?"".concat(r.substring(0,20),"..."):"MISSING"}),console.error("Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in Vercel environment variables and redeploy."));let n=(0,a.eI)(l,r||"placeholder-key",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[432,971,23,744],function(){return e(e.s=8692)}),_N_E=e.O()}]);